{"version":3,"sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","../node_modules/freeice/stun.json","../node_modules/freeice/turn.json","../lib/browser.js","../lib/index.js","../lib/WebRtcPeer.js","../node_modules/browserify/node_modules/events/events.js","../node_modules/inherits/inherits_browser.js","../node_modules/freeice/index.js","../node_modules/uuid/uuid.js","../node_modules/merge/merge.js","../node_modules/ua-parser-js/src/ua-parser.js","../node_modules/uuid/rng-browser.js","../node_modules/freeice/node_modules/normalice/index.js"],"names":["window","addEventListener","module","exports","require","WebRtcPeer","noop","error","console","trackStop","track","stop","streamStop","stream","getTracks","forEach","bufferizeCandidates","pc","onerror","candidatesQueue","this","signalingState","length","entry","shift","addIceCandidate","candidate","callback","Error","remoteDescription","push","mode","options","setRemoteVideo","remoteVideo","getRemoteStreams","url","URL","createObjectURL","pause","src","load","log","streamEndedListener","self","emit","start","videoStream","localVideo","showLocalVideo","addStream","audioStream","browser","parser","getBrowser","name","major","getMedia","constraints","Array","prototype","slice","call","arguments","unshift","MEDIA_CONSTRAINTS","getUserMedia","recursive","apply","undefined","super_","Function","bind","mediaConstraints","connectionConstraints","peerConnection","sendSource","guid","uuid","v4","configuration","iceServers","freeice","onstreamended","on","onicecandidate","oncandidategatheringdone","RTCPeerConnection","Object","defineProperties","get","currentFrame","readyState","HAVE_CURRENT_DATA","canvas","document","createElement","width","videoWidth","height","videoHeight","getContext","drawImage","candidatesQueueOut","candidategatheringdone","event","EventEmitter","listenerCount","listener","iceCandidate","RTCIceCandidate","generateOffer","browserDependantConstraints","version","offerToReceiveAudio","offerToReceiveVideo","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","optional","DtlsSrtpKeyAgreement","JSON","stringify","createOffer","offer","setLocalDescription","sdp","processAnswer","getLocalSessionDescriptor","localDescription","getRemoteSessionDescriptor","muted","sdpAnswer","answer","RTCSessionDescription","type","setRemoteDescription","processOffer","sdpOffer","createAnswer","setTimeout","getScreenConstraints","removeAllListeners","cancelChooseDesktopMedia","createEnableDescriptor","method","enumerable","streams","getLocalStreams","i","tracks","j","enabled","set","value","trackSetEnable","WebRtcPeerRecvonly","WebRtcPeerSendonly","WebRtcPeerSendrecv","inherits","UAParser","warn","audio","video","maxWidth","maxFrameRate","minFrameRate","ua","navigator","userAgent","audioEnabled","videoEnabled","getLocalStream","index","getRemoteStream","dispose","close","_events","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","er","handler","len","args","listeners","addListener","m","newListener","warned","trace","once","g","removeListener","fired","list","position","splice","key","ret","emitter","create","ctor","superCtor","constructor","writable","configurable","TempCtor","normalice","opts","getServers","count","idx","out","input","concat","servers","Math","random","map","String","selected","stun","turn","stunCount","turnCount","parse","s","buf","offset","ii","toLowerCase","replace","oct","_hexToByte","unparse","bth","_byteToHex","v1","b","clockseq","_clockseq","msecs","Date","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","node","_nodeId","rnds","rng","_rng","toString","substr","_seedBytes","isNode","merge_recursive","base","extend","typeOf","merge","clone","argv","result","size","item","sitem","Public","publicName","output","LIBVERSION","EMPTY","UNKNOWN","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","util","regexes","extensions","indexOf","has","str1","str2","lowerize","str","split","mapper","rgx","k","p","q","matches","match","regex","props","exec","getUA","test","maps","oldsafari","1.0","1.2","1.3","2.0","2.0.2","2.0.3","2.0.4","?","device","amazon","model","Fire Phone","sprint","Evo Shift 4G","vendor","HTC","Sprint","os","windows","ME","NT 3.11","NT 4.0","2000","XP","Vista","7","8","8.1","10","RT","cpu","engine","uastring","getResult","rgxmap","getCPU","getDevice","getEngine","getOS","setUA","BROWSER","CPU","DEVICE","ENGINE","OS","define","amd","$","jQuery","Zepto","prop","global","crypto","getRandomValues","_rnds8","Uint8Array","_rnds","r","protocols","protocol","parts","trim","username","credential","urls"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports=[\"stun.l.google.com:19302\",\"stun1.l.google.com:19302\",\"stun2.l.google.com:19302\",\"stun3.l.google.com:19302\",\"stun4.l.google.com:19302\",\"stun.ekiga.net\",\"stun.ideasip.com\",\"stun.schlund.de\",\"stun.stunprotocol.org:3478\",\"stun.voiparound.com\",\"stun.voipbuster.com\",\"stun.voipstunt.com\",\"stun.voxgratia.org\",\"stun.services.mozilla.com\"]","module.exports=[]","if (window.addEventListener)\n    module.exports = require('./index');","var WebRtcPeer = require('./WebRtcPeer');\nexports.WebRtcPeer = WebRtcPeer;","var freeice = require('freeice');\nvar inherits = require('inherits');\nvar UAParser = require('ua-parser-js');\nvar uuid = require('uuid');\nvar EventEmitter = require('events').EventEmitter;\nvar recursive = require('merge').recursive.bind(undefined, true);\ntry {\n    (function () {\n        throw new Error('Cannot find module \\'kurento-browser-extensions\\' from \\'/var/lib/jenkins/workspace/Development/kurento_project_js_release/lib\\'');\n    }());\n} catch (error) {\n    if (typeof getScreenConstraints === 'undefined') {\n        console.warn('screen sharing is not available');\n        getScreenConstraints = function getScreenConstraints(sendSource, callback) {\n            callback(new Error('This library is not enabled for screen sharing'));\n        };\n    }\n}\nvar MEDIA_CONSTRAINTS = {\n        audio: true,\n        video: {\n            mandatory: {\n                maxWidth: 640,\n                maxFrameRate: 15,\n                minFrameRate: 15\n            }\n        }\n    };\nvar ua = window && window.navigator ? window.navigator.userAgent : '';\nvar parser = new UAParser(ua);\nfunction noop(error) {\n    if (error)\n        console.error(error);\n}\nfunction trackStop(track) {\n    track.stop && track.stop();\n}\nfunction streamStop(stream) {\n    stream.getTracks().forEach(trackStop);\n}\nfunction bufferizeCandidates(pc, onerror) {\n    var candidatesQueue = [];\n    pc.addEventListener('signalingstatechange', function () {\n        if (this.signalingState === 'stable') {\n            while (candidatesQueue.length) {\n                var entry = candidatesQueue.shift();\n                this.addIceCandidate(entry.candidate, entry.callback, entry.callback);\n            }\n        }\n    });\n    return function (candidate, callback) {\n        callback = callback || onerror;\n        switch (pc.signalingState) {\n        case 'closed':\n            callback(new Error('PeerConnection object is closed'));\n            break;\n        case 'stable':\n            if (pc.remoteDescription) {\n                pc.addIceCandidate(candidate, callback, callback);\n                break;\n            }\n        default:\n            candidatesQueue.push({\n                candidate: candidate,\n                callback: callback\n            });\n        }\n    };\n}\nfunction WebRtcPeer(mode, options, callback) {\n    if (!(this instanceof WebRtcPeer)) {\n        return new WebRtcPeer(mode, options, callback);\n    }\n    WebRtcPeer.super_.call(this);\n    if (options instanceof Function) {\n        callback = options;\n        options = undefined;\n    }\n    options = options || {};\n    callback = (callback || noop).bind(this);\n    var localVideo = options.localVideo;\n    var remoteVideo = options.remoteVideo;\n    var videoStream = options.videoStream;\n    var audioStream = options.audioStream;\n    var mediaConstraints = options.mediaConstraints;\n    var connectionConstraints = options.connectionConstraints;\n    var pc = options.peerConnection;\n    var sendSource = options.sendSource || 'webcam';\n    var guid = uuid.v4();\n    var configuration = recursive({ iceServers: freeice() }, options.configuration);\n    var onstreamended = options.onstreamended;\n    if (onstreamended)\n        this.on('streamended', onstreamended);\n    var onicecandidate = options.onicecandidate;\n    if (onicecandidate)\n        this.on('icecandidate', onicecandidate);\n    var oncandidategatheringdone = options.oncandidategatheringdone;\n    if (oncandidategatheringdone) {\n        this.on('candidategatheringdone', oncandidategatheringdone);\n    }\n    if (!pc)\n        pc = new RTCPeerConnection(configuration);\n    Object.defineProperties(this, {\n        'peerConnection': {\n            get: function () {\n                return pc;\n            }\n        },\n        'remoteVideo': {\n            get: function () {\n                return remoteVideo;\n            }\n        },\n        'localVideo': {\n            get: function () {\n                return localVideo;\n            }\n        },\n        'currentFrame': {\n            get: function () {\n                if (!remoteVideo)\n                    return;\n                if (remoteVideo.readyState < remoteVideo.HAVE_CURRENT_DATA)\n                    throw new Error('No video stream data available');\n                var canvas = document.createElement('canvas');\n                canvas.width = remoteVideo.videoWidth;\n                canvas.height = remoteVideo.videoHeight;\n                canvas.getContext('2d').drawImage(remoteVideo, 0, 0);\n                return canvas;\n            }\n        }\n    });\n    var self = this;\n    var candidatesQueueOut = [];\n    var candidategatheringdone = false;\n    pc.addEventListener('icecandidate', function (event) {\n        var candidate = event.candidate;\n        if (EventEmitter.listenerCount(self, 'icecandidate') || EventEmitter.listenerCount(self, 'candidategatheringdone')) {\n            if (candidate) {\n                self.emit('icecandidate', candidate);\n                candidategatheringdone = false;\n            } else if (!candidategatheringdone) {\n                self.emit('candidategatheringdone');\n                candidategatheringdone = true;\n            }\n        } else if (!candidategatheringdone) {\n            candidatesQueueOut.push(candidate);\n            if (!candidate)\n                candidategatheringdone = true;\n        }\n    });\n    this.on('newListener', function (event, listener) {\n        if (event === 'icecandidate' || event === 'candidategatheringdone') {\n            while (candidatesQueueOut.length) {\n                var candidate = candidatesQueueOut.shift();\n                if (!candidate === (event === 'candidategatheringdone')) {\n                    listener(candidate);\n                }\n            }\n        }\n    });\n    var addIceCandidate = bufferizeCandidates(pc);\n    this.addIceCandidate = function (iceCandidate, callback) {\n        var candidate = new RTCIceCandidate(iceCandidate);\n        console.log('ICE candidate received');\n        callback = (callback || noop).bind(this);\n        addIceCandidate(candidate, callback);\n    };\n    this.generateOffer = function (callback) {\n        callback = callback.bind(this);\n        var browser = parser.getBrowser();\n        var browserDependantConstraints = browser.name === 'Firefox' && browser.version > 34 ? {\n                offerToReceiveAudio: mode !== 'sendonly',\n                offerToReceiveVideo: mode !== 'sendonly'\n            } : {\n                mandatory: {\n                    OfferToReceiveAudio: mode !== 'sendonly',\n                    OfferToReceiveVideo: mode !== 'sendonly'\n                },\n                optional: [{ DtlsSrtpKeyAgreement: true }]\n            };\n        var constraints = recursive(browserDependantConstraints, connectionConstraints);\n        console.log('constraints: ' + JSON.stringify(constraints));\n        pc.createOffer(function (offer) {\n            console.log('Created SDP offer');\n            pc.setLocalDescription(offer, function () {\n                console.log('Local description set', offer.sdp);\n                callback(null, offer.sdp, self.processAnswer.bind(self));\n            }, callback);\n        }, callback, constraints);\n    };\n    this.getLocalSessionDescriptor = function () {\n        return pc.localDescription;\n    };\n    this.getRemoteSessionDescriptor = function () {\n        return pc.remoteDescription;\n    };\n    function setRemoteVideo() {\n        if (remoteVideo) {\n            var stream = pc.getRemoteStreams()[0];\n            var url = stream ? URL.createObjectURL(stream) : '';\n            remoteVideo.pause();\n            remoteVideo.src = url;\n            remoteVideo.load();\n            console.log('Remote URL:', url);\n        }\n    }\n    this.showLocalVideo = function () {\n        localVideo.src = URL.createObjectURL(videoStream);\n        localVideo.muted = true;\n    };\n    this.processAnswer = function (sdpAnswer, callback) {\n        callback = (callback || noop).bind(this);\n        var answer = new RTCSessionDescription({\n                type: 'answer',\n                sdp: sdpAnswer\n            });\n        console.log('SDP answer received, setting remote description');\n        if (pc.signalingState === 'closed') {\n            return callback('PeerConnection is closed');\n        }\n        pc.setRemoteDescription(answer, function () {\n            setRemoteVideo();\n            callback();\n        }, callback);\n    };\n    this.processOffer = function (sdpOffer, callback) {\n        callback = callback.bind(this);\n        var offer = new RTCSessionDescription({\n                type: 'offer',\n                sdp: sdpOffer\n            });\n        console.log('SDP offer received, setting remote description');\n        if (pc.signalingState === 'closed') {\n            return callback('PeerConnection is closed');\n        }\n        pc.setRemoteDescription(offer, function () {\n            setRemoteVideo();\n            pc.createAnswer(function (answer) {\n                console.log('Created SDP answer');\n                pc.setLocalDescription(answer, function () {\n                    console.log('Local description set', answer.sdp);\n                    callback(null, answer.sdp);\n                }, callback);\n            }, callback);\n        }, callback);\n    };\n    function streamEndedListener() {\n        self.emit('streamended', this);\n    }\n    function start() {\n        if (pc.signalingState === 'closed') {\n            callback('The peer connection object is in \"closed\" state. This is most likely due to an invocation of the dispose method before accepting in the dialogue');\n        }\n        if (videoStream && localVideo) {\n            self.showLocalVideo();\n        }\n        if (videoStream) {\n            videoStream.addEventListener('ended', streamEndedListener);\n            pc.addStream(videoStream);\n        }\n        if (audioStream) {\n            audioStream.addEventListener('ended', streamEndedListener);\n            pc.addStream(audioStream);\n        }\n        var browser = parser.getBrowser();\n        if (mode === 'sendonly' && (browser.name === 'Chrome' || browser.name === 'Chromium') && browser.major === 39) {\n            mode = 'sendrecv';\n        }\n        callback();\n    }\n    if (mode !== 'recvonly' && !videoStream && !audioStream) {\n        function getMedia(constraints) {\n            constraints = Array.prototype.slice.call(arguments);\n            constraints.unshift(MEDIA_CONSTRAINTS);\n            getUserMedia(recursive.apply(undefined, constraints), function (stream) {\n                videoStream = stream;\n                start();\n            }, callback);\n        }\n        if (sendSource === 'webcam') {\n            getMedia(mediaConstraints);\n        } else {\n            getScreenConstraints(sendSource, function (error, constraints) {\n                if (error)\n                    return callback(error);\n                getMedia(constraints, mediaConstraints);\n            }, guid);\n        }\n    } else {\n        setTimeout(start, 0);\n    }\n    this.on('_dispose', function () {\n        if (localVideo) {\n            localVideo.pause();\n            localVideo.src = '';\n            localVideo.load();\n        }\n        if (remoteVideo) {\n            remoteVideo.pause();\n            remoteVideo.src = '';\n            remoteVideo.load();\n        }\n        self.removeAllListeners();\n        if (window.cancelChooseDesktopMedia !== undefined) {\n            window.cancelChooseDesktopMedia(guid);\n        }\n    });\n}\ninherits(WebRtcPeer, EventEmitter);\nfunction createEnableDescriptor(type) {\n    var method = 'get' + type + 'Tracks';\n    return {\n        enumerable: true,\n        get: function () {\n            if (!this.peerConnection)\n                return;\n            var streams = this.peerConnection.getLocalStreams();\n            if (!streams.length)\n                return;\n            for (var i = 0, stream; stream = streams[i]; i++) {\n                var tracks = stream[method]();\n                for (var j = 0, track; track = tracks[j]; j++)\n                    if (!track.enabled)\n                        return false;\n            }\n            return true;\n        },\n        set: function (value) {\n            function trackSetEnable(track) {\n                track.enabled = value;\n            }\n            this.peerConnection.getLocalStreams().forEach(function (stream) {\n                stream[method]().forEach(trackSetEnable);\n            });\n        }\n    };\n}\nObject.defineProperties(WebRtcPeer.prototype, {\n    'enabled': {\n        enumerable: true,\n        get: function () {\n            return this.audioEnabled && this.videoEnabled;\n        },\n        set: function (value) {\n            this.audioEnabled = this.videoEnabled = value;\n        }\n    },\n    'audioEnabled': createEnableDescriptor('Audio'),\n    'videoEnabled': createEnableDescriptor('Video')\n});\nWebRtcPeer.prototype.getLocalStream = function (index) {\n    if (this.peerConnection) {\n        return this.peerConnection.getLocalStreams()[index || 0];\n    }\n};\nWebRtcPeer.prototype.getRemoteStream = function (index) {\n    if (this.peerConnection) {\n        return this.peerConnection.getRemoteStreams()[index || 0];\n    }\n};\nWebRtcPeer.prototype.dispose = function () {\n    console.log('Disposing WebRtcPeer');\n    var pc = this.peerConnection;\n    if (pc) {\n        if (pc.signalingState === 'closed')\n            return;\n        pc.getLocalStreams().forEach(streamStop);\n        pc.close();\n    }\n    this.emit('_dispose');\n};\nfunction WebRtcPeerRecvonly(options, callback) {\n    if (!(this instanceof WebRtcPeerRecvonly)) {\n        return new WebRtcPeerRecvonly(options, callback);\n    }\n    WebRtcPeerRecvonly.super_.call(this, 'recvonly', options, callback);\n}\ninherits(WebRtcPeerRecvonly, WebRtcPeer);\nfunction WebRtcPeerSendonly(options, callback) {\n    if (!(this instanceof WebRtcPeerSendonly)) {\n        return new WebRtcPeerSendonly(options, callback);\n    }\n    WebRtcPeerSendonly.super_.call(this, 'sendonly', options, callback);\n}\ninherits(WebRtcPeerSendonly, WebRtcPeer);\nfunction WebRtcPeerSendrecv(options, callback) {\n    if (!(this instanceof WebRtcPeerSendrecv)) {\n        return new WebRtcPeerSendrecv(options, callback);\n    }\n    WebRtcPeerSendrecv.super_.call(this, 'sendrecv', options, callback);\n}\ninherits(WebRtcPeerSendrecv, WebRtcPeer);\nexports.bufferizeCandidates = bufferizeCandidates;\nexports.WebRtcPeerRecvonly = WebRtcPeerRecvonly;\nexports.WebRtcPeerSendonly = WebRtcPeerSendonly;\nexports.WebRtcPeerSendrecv = WebRtcPeerSendrecv;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","/* jshint node: true */\n'use strict';\n\nvar normalice = require('normalice');\n\n/**\n  # freeice\n\n  The `freeice` module is a simple way of getting random STUN or TURN server\n  for your WebRTC application.  The list of servers (just STUN at this stage)\n  were sourced from this [gist](https://gist.github.com/zziuni/3741933).\n\n  ## Example Use\n\n  The following demonstrates how you can use `freeice` with\n  [rtc-quickconnect](https://github.com/rtc-io/rtc-quickconnect):\n\n  <<< examples/quickconnect.js\n\n  As the `freeice` module generates ice servers in a list compliant with the\n  WebRTC spec you will be able to use it with raw `RTCPeerConnection`\n  constructors and other WebRTC libraries.\n\n  ## Hey, don't use my STUN/TURN server!\n\n  If for some reason your free STUN or TURN server ends up in the\n  list of servers ([stun](https://github.com/DamonOehlman/freeice/blob/master/stun.json) or\n  [turn](https://github.com/DamonOehlman/freeice/blob/master/turn.json))\n  that is used in this module, you can feel\n  free to open an issue on this repository and those servers will be removed\n  within 24 hours (or sooner).  This is the quickest and probably the most\n  polite way to have something removed (and provides us some visibility\n  if someone opens a pull request requesting that a server is added).\n\n  ## Please add my server!\n\n  If you have a server that you wish to add to the list, that's awesome! I'm\n  sure I speak on behalf of a whole pile of WebRTC developers who say thanks.\n  To get it into the list, feel free to either open a pull request or if you\n  find that process a bit daunting then just create an issue requesting\n  the addition of the server (make sure you provide all the details, and if\n  you have a Terms of Service then including that in the PR/issue would be\n  awesome).\n\n  ## I know of a free server, can I add it?\n\n  Sure, if you do your homework and make sure it is ok to use (I'm currently\n  in the process of reviewing the terms of those STUN servers included from\n  the original list).  If it's ok to go, then please see the previous entry\n  for how to add it.\n\n  ## Current List of Servers\n\n  * current as at the time of last `README.md` file generation\n\n  ### STUN\n\n  <<< stun.json\n\n  ### TURN\n\n  <<< turn.json\n\n**/\n\nvar freeice = module.exports = function(opts) {\n  // if a list of servers has been provided, then use it instead of defaults\n  var servers = {\n    stun: (opts || {}).stun || require('./stun.json'),\n    turn: (opts || {}).turn || require('./turn.json')\n  };\n\n  var stunCount = (opts || {}).stunCount || 2;\n  var turnCount = (opts || {}).turnCount || 0;\n  var selected;\n\n  function getServers(type, count) {\n    var out = [];\n    var input = [].concat(servers[type]);\n    var idx;\n\n    while (input.length && out.length < count) {\n      idx = (Math.random() * input.length) | 0;\n      out = out.concat(input.splice(idx, 1));\n    }\n\n    return out.map(function(url) {\n        //If it's a not a string, don't try to \"normalice\" it otherwise using type:url will screw it up\n        if ((typeof url !== 'string') && (! (url instanceof String))) {\n            return url;\n        } else {\n            return normalice(type + ':' + url);\n        }\n    });\n  }\n\n  // add stun servers\n  selected = [].concat(getServers('stun', stunCount));\n\n  if (turnCount) {\n    selected = selected.concat(getServers('turn', turnCount));\n  }\n\n  return selected;\n};\n","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar _rng = require('./rng');\n\n// Maps for number <-> hex string conversion\nvar _byteToHex = [];\nvar _hexToByte = {};\nfor (var i = 0; i < 256; i++) {\n  _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n  _hexToByte[_byteToHex[i]] = i;\n}\n\n// **`parse()` - Parse a UUID into it's component bytes**\nfunction parse(s, buf, offset) {\n  var i = (buf && offset) || 0, ii = 0;\n\n  buf = buf || [];\n  s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n    if (ii < 16) { // Don't overflow!\n      buf[i + ii++] = _hexToByte[oct];\n    }\n  });\n\n  // Zero out remaining bytes if string was short\n  while (ii < 16) {\n    buf[i + ii++] = 0;\n  }\n\n  return buf;\n}\n\n// **`unparse()` - Convert UUID byte array (ala parse()) into a string**\nfunction unparse(buf, offset) {\n  var i = offset || 0, bth = _byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = _rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; n++) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : unparse(b);\n}\n\n// **`v4()` - Generate random UUID**\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v4(options, buf, offset) {\n  // Deprecated - 'format' argument, as supported in v1.2\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || _rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ii++) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || unparse(rnds);\n}\n\n// Export public API\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\nuuid.parse = parse;\nuuid.unparse = unparse;\n\nmodule.exports = uuid;\n","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.0\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","/**\n * UAParser.js v0.7.9\n * Lightweight JavaScript-based User-Agent string parser\n * https://github.com/faisalman/ua-parser-js\n *\n * Copyright © 2012-2015 Faisal Salman <fyzlman@gmail.com>\n * Dual licensed under GPLv2 & MIT\n */\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '0.7.9',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major', // deprecated\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded';\n\n\n    ///////////\n    // Helper\n    //////////\n\n\n    var util = {\n        extend : function (regexes, extensions) {\n            for (var i in extensions) {\n                if (\"browser cpu device engine os\".indexOf(i) !== -1 && extensions[i].length % 2 === 0) {\n                    regexes[i] = extensions[i].concat(regexes[i]);\n                }\n            }\n            return regexes;\n        },\n        has : function (str1, str2) {\n          if (typeof str1 === \"string\") {\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\n          } else {\n            return false;\n          }\n        },\n        lowerize : function (str) {\n            return str.toLowerCase();\n        },\n        major : function (version) {\n            return typeof(version) === STR_TYPE ? version.split(\".\")[0] : undefined;\n        }\n    };\n\n\n    ///////////////\n    // Map helper\n    //////////////\n\n\n    var mapper = {\n\n        rgx : function () {\n\n            var result, i = 0, j, k, p, q, matches, match, args = arguments;\n\n            // loop through all regexes maps\n            while (i < args.length && !matches) {\n\n                var regex = args[i],       // even sequence (0,2,4,..)\n                    props = args[i + 1];   // odd sequence (1,3,5,..)\n\n                // construct object barebones\n                if (typeof result === UNDEF_TYPE) {\n                    result = {};\n                    for (p in props) {\n                        q = props[p];\n                        if (typeof q === OBJ_TYPE) {\n                            result[q[0]] = undefined;\n                        } else {\n                            result[q] = undefined;\n                        }\n                    }\n                }\n\n                // try matching uastring with regexes\n                j = k = 0;\n                while (j < regex.length && !matches) {\n                    matches = regex[j++].exec(this.getUA());\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length == 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        result[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        result[q[0]] = q[1];\n                                    }\n                                } else if (q.length == 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        result[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        result[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length == 4) {\n                                        result[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                result[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n            return result;\n        },\n\n        str : function (str, map) {\n\n            for (var i in map) {\n                // check if array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (util.has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (util.has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n        }\n    };\n\n\n    ///////////////\n    // String map\n    //////////////\n\n\n    var maps = {\n\n        browser : {\n            oldsafari : {\n                version : {\n                    '1.0'   : '/8',\n                    '1.2'   : '/1',\n                    '1.3'   : '/3',\n                    '2.0'   : '/412',\n                    '2.0.2' : '/416',\n                    '2.0.3' : '/417',\n                    '2.0.4' : '/419',\n                    '?'     : '/'\n                }\n            }\n        },\n\n        device : {\n            amazon : {\n                model : {\n                    'Fire Phone' : ['SD', 'KF']\n                }\n            },\n            sprint : {\n                model : {\n                    'Evo Shift 4G' : '7373KT'\n                },\n                vendor : {\n                    'HTC'       : 'APA',\n                    'Sprint'    : 'Sprint'\n                }\n            }\n        },\n\n        os : {\n            windows : {\n                version : {\n                    'ME'        : '4.90',\n                    'NT 3.11'   : 'NT3.51',\n                    'NT 4.0'    : 'NT4.0',\n                    '2000'      : 'NT 5.0',\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\n                    'Vista'     : 'NT 6.0',\n                    '7'         : 'NT 6.1',\n                    '8'         : 'NT 6.2',\n                    '8.1'       : 'NT 6.3',\n                    '10'        : ['NT 6.4', 'NT 10.0'],\n                    'RT'        : 'ARM'\n                }\n            }\n        }\n    };\n\n\n    //////////////\n    // Regex map\n    /////////////\n\n\n    var regexes = {\n\n        browser : [[\n\n            // Presto based\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\n\n            ], [NAME, VERSION], [\n\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\n            ], [[NAME, 'Opera'], VERSION], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n\n            // Trident based\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\n\n            // Webkit/KHTML based\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\\/([\\w\\.-]+)/i\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium\n            ], [NAME, VERSION], [\n\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\n            ], [[NAME, 'IE'], VERSION], [\n\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\n            ], [NAME, VERSION], [\n\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\n            ], [[NAME, 'Yandex'], VERSION], [\n\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i,\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\n            /(uc\\s?browser|qqbrowser)[\\/\\s]?([\\w\\.]+)/i\n                                                                                // UCBrowser/QQBrowser\n            ], [NAME, VERSION], [\n\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\n            ], [[NAME, 'Dolphin'], VERSION], [\n\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\n            ], [[NAME, 'Chrome'], VERSION], [\n\n            /XiaoMi\\/MiuiBrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI Browser']], [\n\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)/i         // Android Browser\n            ], [VERSION, [NAME, 'Android Browser']], [\n\n            /FBAV\\/([\\w\\.]+);/i                                                 // Facebook App for iOS\n            ], [VERSION, [NAME, 'Facebook']], [\n\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\n\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, 'Firefox']], [\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\\/\\s]?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\n            ], [NAME, VERSION]\n\n            /* /////////////////////\n            // Media players BEGIN\n            ////////////////////////\n\n            , [\n\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\n            ], [NAME, VERSION], [\n\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\n            ], [NAME, VERSION], [\n\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\n            ], [NAME, VERSION], [\n\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\n            ], [NAME, VERSION], [\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\n            ], [NAME, VERSION], [\n\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\n            ], [[NAME, 'Flip Player'], VERSION], [\n\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\n            ], [NAME], [\n\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // Gstreamer\n            ], [NAME, VERSION], [\n\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\n                                                                                // Java/urllib/requests/wget/cURL\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\n            ], [NAME, VERSION], [\n\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\n            ], [[NAME, /_/g, ' '], VERSION], [\n\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\n                                                                                // MPlayer SVN\n            ], [NAME, VERSION], [\n\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\n            ], [NAME, VERSION], [\n\n            /(mplayer)/i,                                                       // MPlayer (no other info)\n            /(yourmuze)/i,                                                      // YourMuze\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\n            ], [NAME], [\n\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\n            ], [NAME, VERSION], [\n\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\n            ], [NAME, VERSION], [\n\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\n            ], [NAME, VERSION], [\n\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\n            ], [NAME, VERSION], [\n\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\n                                                                                // inlight radio\n            ], [NAME], [\n\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\n                                                                                // SoundTap/Totem/Stagefright/Streamium\n            ], [NAME, VERSION], [\n\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\n            ], [NAME, VERSION], [\n\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\n            ], [NAME, VERSION], [\n\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\n            ], [[NAME, /-/g, ' '], VERSION], [\n\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\n                                                                                // Windows Media Server\n            ], [VERSION, [NAME, 'Windows']], [\n\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\n            ], [NAME, VERSION], [\n\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\n            ], [[NAME, 'rad.io'], VERSION]\n\n            //////////////////////\n            // Media players END\n            ////////////////////*/\n\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, util.lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows\\s(ce|mobile);\\sppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, util.lowerize]]\n        ],\n\n        device : [[\n\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\n\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\n\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\n\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\n\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\n            /(asus)-?(\\w+)/i                                                    // Asus\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\n                                                                                // Asus Tablets\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7)/i\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\n\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\n            /(sony)?(?:sgp.+)\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\n\n            /\\s(ouya)\\s/i,                                                      // Ouya\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n\n            /(playstation\\s[3portablevi]+)/i                                    // Playstation\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\n\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\n\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\n            /(zte)-(\\w+)*/i,                                                    // ZTE\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n                \n            /(nexus\\s9)/i                                                       // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\n\n                                                                                // Motorola\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\n            /mot[\\s-]?(\\w+)*/i,\n            /(XT\\d{3,4}) build\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\n\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,\n            /((SM-T\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-n900))/i,\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\n            /sec-((sgh\\w+))/i\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\n            /(samsung);smarttv/i\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\n            /sie-(\\w+)*/i                                                       // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\n            /(nokia)[\\s_-]?([\\w-]+)*/i\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /(nexus\\s[45])/i,                                                   // LG\n            /lg[e;\\s\\/-]+(\\w+)*/i\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\n\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            /linux;.+((jolla));/i                                               // Jolla\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\n\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                        // Xiaomi Hongmi 'numeric' models\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,                   // Xiaomi Hongmi\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\n\n            /(mobile|tablet);.+rv\\:.+gecko\\//i                                  // Unidentifiable\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\n\n            /*//////////////////////////\n            // TODO: move to string map\n            ////////////////////////////\n\n            /(C6603)/i                                                          // Sony Xperia Z C6603\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n            /(C6903)/i                                                          // Sony Xperia Z 1\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\n\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\n\n            /(R1001)/i                                                          // Oppo R1001\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /(X9006)/i                                                          // Oppo Find 7a\n            ], [[MODEL, 'Find 7a'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\n            /(R2001)/i                                                          // Oppo YOYO R2001\n            ], [[MODEL, 'Yoyo R2001'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\n            /(R815)/i                                                           // Oppo Clover R815\n            ], [[MODEL, 'Clover R815'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\n             /(U707)/i                                                          // Oppo Find Way S\n            ], [[MODEL, 'Find Way S'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\n\n            /(T3C)/i                                                            // Advan Vandroid T3C\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\n\n            /(V972M)/i                                                          // ZTE V972M\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\n            \n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\n\n            /////////////\n            // END TODO\n            ///////////*/\n\n        ],\n\n        engine : [[\n\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, 'EdgeHTML']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows based\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\n            /(windows\\sphone(?:\\sos)*|windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\n\n            // Mobile/Embedded OS\n            /\\((bb)(10);/i                                                      // BlackBerry 10\n            ], [[NAME, 'BlackBerry'], VERSION], [\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\n            /linux;.+(sailfish);/i                                              // Sailfish OS\n            ], [NAME, VERSION], [\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\n            ], [[NAME, 'Symbian'], VERSION], [\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME], [\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\n            ], [[NAME, 'Firefox OS'], VERSION], [\n\n            // Console\n            /(nintendo|playstation)\\s([wids3portablevu]+)/i,                    // Nintendo/Playstation\n\n            // GNU/Linux based\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?([\\w\\.-]+)*/i,\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\n            ], [NAME, VERSION], [\n\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\n            ], [[NAME, 'Chromium OS'], VERSION],[\n\n            // Solaris\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n\n            // BSD based\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\n            ], [NAME, VERSION],[\n\n            /(ip[honead]+)(?:.*os\\s*([\\w]+)*\\slike\\smac|;\\sopera)/i             // iOS\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\n\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\n\n            // Other\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\n            /(haiku)\\s(\\w+)/i,                                                  // Haiku\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n\n    var UAParser = function (uastring, extensions) {\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(uastring, extensions).getResult();\n        }\n\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\n\n        this.getBrowser = function () {\n            var browser = mapper.rgx.apply(this, rgxmap.browser);\n            browser.major = util.major(browser.version);\n            return browser;\n        };\n        this.getCPU = function () {\n            return mapper.rgx.apply(this, rgxmap.cpu);\n        };\n        this.getDevice = function () {\n            return mapper.rgx.apply(this, rgxmap.device);\n        };\n        this.getEngine = function () {\n            return mapper.rgx.apply(this, rgxmap.engine);\n        };\n        this.getOS = function () {\n            return mapper.rgx.apply(this, rgxmap.os);\n        };\n        this.getResult = function() {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return ua;\n        };\n        this.setUA = function (uastring) {\n            ua = uastring;\n            return this;\n        };\n        this.setUA(ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER = {\n        NAME    : NAME,\n        MAJOR   : MAJOR, // deprecated\n        VERSION : VERSION\n    };\n    UAParser.CPU = {\n        ARCHITECTURE : ARCHITECTURE\n    };\n    UAParser.DEVICE = {\n        MODEL   : MODEL,\n        VENDOR  : VENDOR,\n        TYPE    : TYPE,\n        CONSOLE : CONSOLE,\n        MOBILE  : MOBILE,\n        SMARTTV : SMARTTV,\n        TABLET  : TABLET,\n        WEARABLE: WEARABLE,\n        EMBEDDED: EMBEDDED\n    };\n    UAParser.ENGINE = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n    UAParser.OS = {\n        NAME    : NAME,\n        VERSION : VERSION\n    };\n\n\n    ///////////\n    // Export\n    //////////\n\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note: \n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = window.jQuery || window.Zepto;\n    if (typeof $ !== UNDEF_TYPE) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function() {\n            return parser.getUA();\n        };\n        $.ua.set = function (uastring) {\n            parser.setUA(uastring);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","\nvar rng;\n\nif (global.crypto && crypto.getRandomValues) {\n  // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n  // Moderately fast, high quality\n  var _rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(_rnds8);\n    return _rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  _rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return _rnds;\n  };\n}\n\nmodule.exports = rng;\n\n","/**\n  # normalice\n\n  Normalize an ice server configuration object (or plain old string) into a format\n  that is usable in all browsers supporting WebRTC.  Primarily this module is designed\n  to help with the transition of the `url` attribute of the configuration object to\n  the `urls` attribute.\n\n  ## Example Usage\n\n  <<< examples/simple.js\n\n**/\n\nvar protocols = [\n  'stun:',\n  'turn:'\n];\n\nmodule.exports = function(input) {\n  var url = (input || {}).url || input;\n  var protocol;\n  var parts;\n  var output = {};\n\n  // if we don't have a string url, then allow the input to passthrough\n  if (typeof url != 'string' && (! (url instanceof String))) {\n    return input;\n  }\n\n  // trim the url string, and convert to an array\n  url = url.trim();\n\n  // if the protocol is not known, then passthrough\n  protocol = protocols[protocols.indexOf(url.slice(0, 5))];\n  if (! protocol) {\n    return input;\n  }\n\n  // now let's attack the remaining url parts\n  url = url.slice(5);\n  parts = url.split('@');\n\n  output.username = input.username;\n  output.credential = input.credential;\n  // if we have an authentication part, then set the credentials\n  if (parts.length > 1) {\n    url = parts[1];\n    parts = parts[0].split(':');\n\n    // add the output credential and username\n    output.username = parts[0];\n    output.credential = (input || {}).credential || parts[1] || '';\n  }\n\n  output.url = protocol + url;\n  output.urls = [ output.url ];\n\n  return output;\n};\n"]}